<h1>Select Your Champion</h1>

<% if current_user == @game.player1 %>
  <h2>Player 1 - Select Your Champion</h2>

  <!-- Form for selecting Player 1's Champion -->
  <form action="/games/<%= @game.id %>/chose_champion" method="post">
    <% @characters.each do |selection| %>
      <div>
        <input type="radio" name="player1_champion" value="<%= selection.id %>" id="character_<%= selection.id %>">
        <label for="character_<%= selection.id %>"><%= selection.name %></label>

        <% if selection.photo.attached? %>
          <%= image_tag selection.photo, alt: selection.name, style: "width: 100px; height: 100px;" %>
        <% else %>
          <p>No image available</p>
        <% end %>
      </div>
    <% end %>

    <!-- CSRF Token for POST request -->
    <%= csrf_meta_tags %>

    <button type="submit">Confirm Champion</button>
  </form>

<% elsif current_user == @game.player2 %>
  <h2>Player 2 - Select Your Champion</h2>

  <!-- Form for selecting Player 2's Champion -->
  <form action="/games/<%= @game.id %>/chose_champion" method="post">
    <% @characters.each do |selection| %>
      <div>
        <input type="radio" name="player2_champion" value="<%= selection.id %>" id="character_<%= selection.id %>">
        <label for="character_<%= selection.id %>"><%= selection.name %></label>

        <% if selection.photo.attached? %>
          <%= image_tag selection.photo, alt: selection.name, style: "width: 100px; height: 100px;" %>
        <% else %>
          <p>No image available</p>
        <% end %>
      </div>
    <% end %>

    <!-- CSRF Token for POST request -->
    <%= csrf_meta_tags %>

    <button type="submit">Confirm Champion</button>
  </form>

<% else %>
  <p>You are not authorized to select a champion for this game.</p>
<% end %>
